<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="utf-8">
<title>DuckFlix VR Cinema</title>
<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
<style>
body { margin: 0; background: black; }
</style>
</head>

<body>

<!-- VIDEO -->
<video id="video" crossorigin="anonymous" playsinline></video>

<a-scene vr-mode-ui="enabled: true">

  <!-- CAMERA + OLHAR -->
  <a-entity position="0 1.6 0">
    <a-camera>
      <a-cursor
        fuse="true"
        fuse-timeout="1200"
        material="color: yellow; shader: flat">
      </a-cursor>
    </a-camera>
  </a-entity>

  <!-- LUZ -->
  <a-light type="ambient" intensity="0.6"></a-light>
  <a-light type="point" intensity="1" position="0 3 -2"></a-light>

  <!-- CINEMA REAL -->
  <!-- CHÃƒO -->
  <a-plane rotation="-90 0 0" width="12" height="12" color="#222"></a-plane>

  <!-- TETO -->
  <a-plane position="0 4 0" rotation="90 0 0" width="12" height="12" color="#111"></a-plane>

  <!-- PAREDES -->
  <a-plane position="0 2 -6" width="12" height="4" color="#111"></a-plane>
  <a-plane position="-6 2 0" rotation="0 90 0" width="12" height="4" color="#111"></a-plane>
  <a-plane position="6 2 0" rotation="0 -90 0" width="12" height="4" color="#111"></a-plane>

  <!-- TELA DE CINEMA -->
  <a-video id="screen"
    src="#video"
    position="0 2 -5.9"
    width="6.5"
    height="3.6"
    material="shader: flat">
  </a-video>

  <!-- PAINEL LATERAL DE LISTA -->
  <a-entity id="lista" position="4 2 -3"></a-entity>

</a-scene>

<script>
const video = document.getElementById("video");
const screen = document.getElementById("screen");
const lista = document.getElementById("lista");

// DEMO (depois liga com pasta)
const filmes = [
  { nome: "ðŸŽ¬ Filme Local", tipo: "local", url: "demo.mp4" },
  { nome: "â–¶ Matrix Trailer", tipo: "yt", url: "https://www.youtube.com/watch?v=vKQi3bBA1y8" },
  { nome: "â–¶ Vingadores", tipo: "yt", url: "https://youtu.be/eOrNdBpGMv8" }
];

let y = 0;

// CRIAR BOTÃ•ES DA LISTA
filmes.forEach(item => {
  const botao = document.createElement("a-plane");
  botao.setAttribute("width", "2.8");
  botao.setAttribute("height", "0.35");
  botao.setAttribute("color", "#333");
  botao.setAttribute("position", `0 ${-y} 0`);
  botao.setAttribute("class", "clickable");

  botao.addEventListener("click", () => {
    if (item.tipo === "yt") abrirYT(item.url);
    else tocarLocal(item.url);
  });

  const texto = document.createElement("a-text");
  texto.setAttribute("value", item.nome);
  texto.setAttribute("align", "left");
  texto.setAttribute("color", "white");
  texto.setAttribute("width", "3");
  texto.setAttribute("position", "-1.3 0 0.01");

  botao.appendChild(texto);
  lista.appendChild(botao);

  y += 0.45;
});

function tocarLocal(url) {
  video.src = url;
  video.play();
}

function abrirYT(link) {
  const embed = link.replace("watch?v=", "embed/");
  screen.setAttribute("src", embed);
}
</script>

</body>
</html>
